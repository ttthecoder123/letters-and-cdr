<!-- SUBPOENA MODULE -->
<div class="content">
    <h2>Subpoena Generation System</h2>
    <p>Generate formal subpoenas for NSW court proceedings</p>
    
    <div id="clientInfo" class="client-info" style="display: none;"></div>

    <form id="subpoenaForm">
        <!-- Recipient Details Section -->
        <div class="form-section">
            <h3 class="section-title">Recipient Details</h3>
            
            <div class="form-group">
                <label for="organizationType">
                    Organization Type
                </label>
                <select id="organizationType" onchange="handleOrganizationChange()">
                    <option value="">-- Manual Entry --</option>
                    <option value="NSW Police">NSW Police Force</option>
                </select>
                <span class="helper-text">Select for pre-filled details or choose manual entry</span>
            </div>

            <div class="form-group">
                <label for="recipientName">
                    Name of Person/Organization <span style="color: #dc2626;">*</span>
                </label>
                <input type="text" id="recipientName" placeholder="Enter full name or organization name" required>
            </div>

            <div class="form-group">
                <label for="recipientAddress">
                    Full Address <span style="color: #dc2626;">*</span>
                </label>
                <textarea id="recipientAddress" placeholder="Enter complete address including postcode" required></textarea>
            </div>
        </div>

        <!-- Court Information Section -->
        <div class="form-section">
            <h3 class="section-title">Court Information</h3>
            
            <div class="form-group">
                <label for="courtLevel">
                    Court Level <span style="color: #dc2626;">*</span>
                </label>
                <select id="courtLevel" required>
                    <option value="">-- Select Court Level --</option>
                    <option value="Local Court">Local Court</option>
                    <option value="District Court">District Court</option>
                    <option value="Supreme Court">Supreme Court</option>
                </select>
            </div>

            <div class="form-group">
                <label for="courtLocation">
                    Court Location <span style="color: #dc2626;">*</span>
                </label>
                <input type="text" id="courtLocation" list="courtLocations" placeholder="e.g., Campbelltown, Sydney Downing Centre" required>
                <datalist id="courtLocations">
                    <option value="Campbelltown">
                    <option value="Sydney Downing Centre">
                    <option value="Parramatta">
                    <option value="Penrith">
                    <option value="Liverpool">
                    <option value="Fairfield">
                    <option value="Bankstown">
                </datalist>
            </div>

            <div class="form-group">
                <label for="returnDate">
                    Return Date <span style="color: #dc2626;">*</span>
                </label>
                <input type="date" id="returnDate" required>
                <span class="helper-text">Date when they must appear in court</span>
            </div>

            <div class="form-group">
                <label for="complianceDate">
                    Compliance Date <span style="color: #dc2626;">*</span>
                </label>
                <input type="date" id="complianceDate" required>
                <span class="helper-text">Date by when documents must be produced</span>
                <div id="dateWarning" class="date-warning"></div>
            </div>
        </div>

        <!-- Case Details Section -->
        <div class="form-section">
            <h3 class="section-title">Case Details</h3>
            
            <div class="form-group">
                <label for="partyType">
                    Party Type <span style="color: #dc2626;">*</span>
                </label>
                <select id="partyType" required>
                    <option value="R v">R v (Criminal)</option>
                    <option value="Police v">Police v (Summary)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="clientName">
                    Client Name <span style="color: #dc2626;">*</span>
                </label>
                <input type="text" id="clientName" placeholder="Enter client name" required>
            </div>

            <div class="form-group">
                <label for="proceedingsNumber">
                    Proceedings Number
                </label>
                <input type="text" id="proceedingsNumber" placeholder="Enter proceedings number if available">
                <span class="helper-text">Leave blank if not yet allocated</span>
            </div>

            <div class="form-group">
                <label for="chargeOffence">
                    Charge/Offence <span style="color: #dc2626;">*</span>
                </label>
                <textarea id="chargeOffence" placeholder="Enter the charge or offence details" required></textarea>
            </div>
        </div>

        <!-- Documents Sought Section -->
        <div class="form-section">
            <h3 class="section-title">Documents Sought</h3>
            
            <div class="form-group">
                <label for="documentsRequested">
                    Documents Requested <span style="color: #dc2626;">*</span>
                </label>
                <textarea id="documentsRequested" placeholder="Describe the specific documents or materials sought" required></textarea>
                <span class="helper-text">Be specific about what documents are needed (e.g., "All CCTV footage", "Witness statements", "Police records")</span>
            </div>

            <div class="form-group">
                <label for="relevanceStatement">
                    Relevance Statement <span style="color: #dc2626;">*</span>
                </label>
                <textarea id="relevanceStatement" placeholder="Explain how these documents are relevant to the proceedings" required></textarea>
                <span class="helper-text">Briefly explain why these documents are necessary for the case</span>
            </div>
        </div>

        <!-- Contact Information Section -->
        <div class="form-section">
            <h3 class="section-title">Contact Information</h3>
            
            <div class="form-group">
                <label for="solicitorName">
                    Solicitor Name <span style="color: #dc2626;">*</span>
                </label>
                <select id="solicitorName" required>
                    <option value="">-- Select Solicitor --</option>
                    <option value="Rylie Hahn-Hamilton">Rylie Hahn-Hamilton</option>
                    <option value="Sophia Seton">Sophia Seton</option>
                    <option value="Natalie McDonald">Natalie McDonald</option>
                </select>
            </div>

            <div class="form-group">
                <label for="lawFirmName">
                    Law Firm Name <span style="color: #dc2626;">*</span>
                </label>
                <input type="text" id="lawFirmName" value="[Your Law Firm Name]" required>
            </div>

            <div class="form-group">
                <label for="firmAddress">
                    Firm Address <span style="color: #dc2626;">*</span>
                </label>
                <textarea id="firmAddress" placeholder="Enter law firm address" required></textarea>
            </div>

            <div class="form-group">
                <label for="contactPhone">
                    Contact Phone <span style="color: #dc2626;">*</span>
                </label>
                <input type="tel" id="contactPhone" placeholder="Enter contact phone number" required>
            </div>

            <div class="form-group">
                <label for="contactEmail">
                    Contact Email <span style="color: #dc2626;">*</span>
                </label>
                <input type="email" id="contactEmail" placeholder="Enter contact email address" required>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions" style="margin-top: 30px;">
            <button type="button" onclick="generateSubpoena()" class="btn btn-primary">
                Generate Subpoena
            </button>
            <button type="button" onclick="clearSubpoenaForm()" class="btn btn-secondary">
                Clear Form
            </button>
        </div>
    </form>

    <!-- Output Section -->
    <div id="subpoenaOutput" class="output-section" style="display: none;">
        <h3>Generated Subpoena</h3>
        <div class="output-box" id="subpoenaText"></div>
        <div class="form-actions" style="margin-top: 20px;">
            <button onclick="copySubpoenaToClipboard()" class="btn btn-primary">
                Copy to Clipboard
            </button>
            <button onclick="submitSubpoenaToZapier()" class="btn btn-success">
                Submit to Zapier
            </button>
        </div>
        <div id="subpoenaZapierStatus" style="display: none; margin-top: 10px; padding: 10px; border-radius: 4px;"></div>
    </div>
</div>