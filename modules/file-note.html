<h2>Generate File Note</h2>
<p>Create formal documentation of client interactions and court appearances</p>

<!-- Client Selection Section -->
<div class="form-group">
    <label for="fileNoteClientSelect">Select Client (Optional):</label>
    <select id="fileNoteClientSelect" onchange="loadFileNoteClientInfo()">
        <option value="">-- Manual Entry --</option>
    </select>
</div>

<!-- Client Information Display -->
<div id="fileNoteClientInfo" style="display: none; margin: 10px 0; padding: 10px; background: #f0f9ff; border-radius: 6px;"></div>

<!-- Dynamic File Note Form Container -->
<div id="fileNoteForm"></div>

<!-- Form Actions -->
<div class="form-actions" style="margin-top: 30px;">
    <button class="btn btn-primary" onclick="EventHandlers.generateFileNote()">Generate File Note</button>
    <button class="btn btn-secondary" onclick="CoreUtils.clearFormFields('moduleContainer')">Clear Form</button>
</div>

<!-- Output Section -->
<div id="fileNoteOutput" style="display: none; margin-top: 20px;"></div>
<div id="fileNoteStatus" style="display: none; margin-top: 10px;"></div>

<script>
// Initialize File Note form when module loads
// Use a timeout to ensure all scripts are loaded
setTimeout(() => {
    if (window.UIBuilder && document.getElementById('fileNoteForm')) {
        console.log('Building File Note form...');
        window.UIBuilder.buildForm('FileNote', 'fileNoteForm');
    } else {
        console.log('UIBuilder not ready for File Note, waiting...');
        // Try again after a short delay
        setTimeout(() => {
            if (window.UIBuilder && document.getElementById('fileNoteForm')) {
                window.UIBuilder.buildForm('FileNote', 'fileNoteForm');
            }
        }, 500);
    }
}, 100);
</script>
